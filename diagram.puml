@startuml
skinparam backgroundColor #FFFFFF
skinparam rectangle {
  BorderColor #444444
  FontColor #111111
  FontSize 14
  RoundCorner 15
}
skinparam node {
  BackgroundColor #F5F5F5
  BorderColor #888888
}
skinparam cloud {
  BackgroundColor #F0F8FF
  BorderColor #5A84C0
}

title eduMDNS System Architecture

' =======================
'  Core System (Server)
' =======================
rectangle "Central Server Host" as CentralHost #FFF6E5 {

    rectangle "eduMDNS Server\n(packet handling, control logic)" as Server #FFE0B3

    rectangle "Web Interface\n(admin + user UI)" as Web #FFD699

    rectangle "eBPF Proxy\n(optional, same machine)" as Proxy #FFCC80
}

' Internal relations
Server <-> Web : internal API calls
Server --> Proxy : optional traffic steering


' =======================
'  Database
' =======================
database "PostgreSQL Database" as DB #E5F2FF
Server <-> DB : packet storage\nconfig + ACLs


' =======================
'  Remote Probes + Smart Devices
' =======================
cloud "Remote Network Segment A" as RemoteA {
    node "Probe A" as ProbeA #D4E6F1
    node "Smart Devices\n(mDNS sources)" as DevicesA #EBF5FB
}

cloud "Remote Network Segment B" as RemoteB {
    node "Probe B" as ProbeB #D4E6F1
    node "Smart Devices\n(mDNS sources)" as DevicesB #EBF5FB
}

DevicesA --> ProbeA : local mDNS\n(L2)
DevicesB --> ProbeB : local mDNS\n(L2)

ProbeA <--> Server : encapsulated packets\n(tunneled, encrypted)
ProbeB <--> Server : encapsulated packets\n(tunneled, encrypted)


' =======================
'  External Clients
' =======================
rectangle "Wireless/Wired Clients\n(user devices)" as Clients #E8E8E8

Server --> Clients : on-demand mDNS\npacket transmission
Proxy --> Clients : proxied device traffic\n(optional)


@enduml
